/*
 * driver_steering.c
 *
 *  Created on: Apr 21, 2024
 *      Author: Matthew Briggs
 */

#include "tim.h"

#include "driver_steering.h"

void Driver_Set_Steering_Duty_Cycle(uint8_t duty_cycle)
{
	//Account for N_Channel
	duty_cycle = 255 - duty_cycle;

	// Input validation for duty cycle
	// Need to clamp from 1 to 254 to avoid no edges (steering servo doesn't like that)
	if (duty_cycle >= 255)
	{
		duty_cycle = 254;
	}
	else if (duty_cycle <= 0)
	{
		duty_cycle = 1;
	}

	// Set compare (8-Bit Resolution)
	__HAL_TIM_SET_COMPARE(&htim1, TIM_CHANNEL_2, duty_cycle);
}
